generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Admin {
  Admin_id         String    @id @unique @default(uuid()) // changed to UUID
  Username         String    @unique
  Password         String    @unique
  Admin_Image      Bytes?
  CreatedCompanies Company[] @relation("AdminToCompany")
  UpdatedCompanies Company[] @relation("AdminToCompanyUpdate")
}

model Company {
  id              String           @id @unique @default(uuid()) // changed to UUID
  C_id            Int              @unique
  C_Name          String?
  Username        String           @unique
  Password        String
  C_Logo_Image    Bytes?
  C_QR_URL        String?
  Welcoming_Page  Bytes?
  CreatedByAdmin  String?
  CreatedAt       DateTime         @default(now())
  UpdatedAt       DateTime         @updatedAt
  UpdatedByAdmin  String?
  createdByAdmin  Admin?           @relation("AdminToCompany", fields: [CreatedByAdmin], references: [Admin_id])
  updatedByAdmin  Admin?           @relation("AdminToCompanyUpdate", fields: [UpdatedByAdmin], references: [Admin_id])
  Main_Categories Main_Category[]
  Password_resets Password_reset[]
  Themes          Theme[]
}

model Main_Category {
  Main_Category_id String @id @unique @default(uuid()) // changed to UUID
  Company_id       String
  Category_Name    String
  Category_No      Int
  Background_image Bytes?

  Company        Company        @relation(fields: [Company_id], references: [id])
  Sub_Categories Sub_Category[]
}

model Password_reset {
  Password_id  String   @id @unique @default(uuid()) // changed to UUID
  old_password String
  new_password String
  rest_time    DateTime @default(now())
  Company_id   String

  Company Company @relation(fields: [Company_id], references: [id])
}

model Sub_Category {
  Sub_Category_id   String @id @unique @default(uuid()) // changed to UUID
  Sub_Category_Name String
  Sub_Order_No      Int
  MainCategory_ID   String
  Menu_Image        Bytes?

  Main_Category Main_Category @relation(fields: [MainCategory_ID], references: [Main_Category_id])
}

model Theme {
  Theme_id          String  @id @unique @default(uuid()) // changed to UUID
  Theme_Style       String
  Background_colour String?
  Logo_Area_Colour  String?
  Text_Colour       String?
  Facebook_URL      String?
  Instagram_URL     String?
  X_URL             String?
  Company_ID        String

  Company Company @relation(fields: [Company_ID], references: [id])
}
